<!DOCTYPE html>
<html lang='en' class=''>

<head>

  <meta charset='UTF-8'>
  <title>RTP1</title>

  <meta name="robots" content="noindex">

  <script src="https://cdn.jsdelivr.net/npm/hls.js"></script>
<link rel="stylesheet" href="https://unpkg.com/plyr@3/dist/plyr.css">
  
  <style>
    .overlay {
  position: fixed;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
  background: black;
  z-index: 10;
}
  </style>

  </head>

<body>
  <iframe src="//popcdn.day/play.php?stream=RTP1"  allow="encrypted-media" class="overlay" allowfullscreen="yes" scrolling="no" frameborder="0"></iframe>
  
  
  
  
  <video controls crossorigin playsinline autoplay hidden>
      <source 
        type="application/x-mpegURL" 
        src="https://wideiptv.top/RTP1/tracks-a1/index.fmp4.m3u8?token=0a65f5edd1f30cddc0a43e65aa100a72ab09dd18-49a7cb162b70d6774a5a64d1a7a7c495-1713116381-1713105581"
      >
    </video>

  <script>
  
  document.addEventListener("DOMContentLoaded", () => {
  const video = document.querySelector("video");
  const source = video.getElementsByTagName("source")[0].src;

  // For more options see: https://github.com/sampotts/plyr/#options
  // captions.update is required for captions to work with hls.js
  const defaultOptions = {};

  if (Hls.isSupported()) {
    // For more Hls.js options, see https://github.com/dailymotion/hls.js
    const hls = new Hls();
    hls.loadSource(source);

    // From the m3u8 playlist, hls parses the manifest and returns
    // all available video qualities. This is important, in this approach,
    // we will have one source on the Plyr player.
    hls.on(Hls.Events.MANIFEST_PARSED, function (event, data) {

      // Transform available levels into an array of integers (height values).
      const availableQualities = hls.levels.map(l => l.height);

      // Add new qualities to option
      defaultOptions.quality = {
        default: availableQualities[0],
        options: availableQualities,
        // this ensures Plyr to use Hls to update quality level
        forced: true,
        onChange: e => updateQuality(e) };


      // Initialize here
      const player = new Plyr(video, defaultOptions);
    });
    hls.attachMedia(video);
    window.hls = hls;
  } else {
    // default options with no quality update in case Hls is not supported
    const player = new Plyr(video, defaultOptions);
  }

  function updateQuality(newQuality) {
    window.hls.levels.forEach((level, levelIndex) => {
      if (level.height === newQuality) {
        console.log("Found quality match with " + newQuality);
        window.hls.currentLevel = levelIndex;
      }
    });
  }
});
  
  
  </script>
  
  </body>

</html>
